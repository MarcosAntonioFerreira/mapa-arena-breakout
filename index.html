<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Mapa com Zoom Direcionado pelo Mouse</title>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #mapa-wrapper {
            position: relative;
            width: 90vw;
            max-width: 1200px;
            height: 80vh;
            overflow: hidden;
            border: 2px solid #333;
        }

        #mapa-inner {
            position: absolute;
            inset: 0;
            background-image: url("/mapa-arena.png");
            /* TROQUE AQUI */
            background-size: cover;
            background-position: center;
            transform: scale(1);
            transform-origin: center center;
            cursor: crosshair;
        }

        .ponto {
            position: absolute;
            width: 16px;
            height: 16px;
            background: red;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div id="mapa-wrapper">
        <div id="mapa-inner"></div>
    </div>

    <script>
        const wrapper = document.getElementById("mapa-wrapper");
        const mapa = document.getElementById("mapa-inner");

        let scale = 1;
        const SCALE_MIN = 1;
        const SCALE_MAX = 4;
        const STEP = 0.2;

        function aplicarZoom(xPercent, yPercent) {
            mapa.style.transformOrigin = `${xPercent}% ${yPercent}%`;
            mapa.style.transform = `scale(${scale})`;
        }

        // Zoom com scroll seguindo o mouse
        wrapper.addEventListener("wheel", (e) => {
            e.preventDefault();

            const rect = wrapper.getBoundingClientRect();

            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const xPercent = (x / rect.width) * 100;
            const yPercent = (y / rect.height) * 100;

            if (e.deltaY < 0) {
                scale = Math.min(scale + STEP, SCALE_MAX);
            } else {
                scale = Math.max(scale - STEP, SCALE_MIN);
            }

            aplicarZoom(xPercent, yPercent);
        });

        // Criar ponto respeitando o zoom
        mapa.addEventListener("click", (e) => {
            if (e.target.classList.contains("ponto")) return;

            const rect = mapa.getBoundingClientRect();

            const x = (e.clientX - rect.left) / scale;
            const y = (e.clientY - rect.top) / scale;

            const ponto = document.createElement("div");
            ponto.className = "ponto";
            ponto.style.left = `${x}px`;
            ponto.style.top = `${y}px`;

            ponto.addEventListener("contextmenu", (ev) => {
                ev.preventDefault();
                ponto.remove();
            });

            mapa.appendChild(ponto);
        });
    </script>

</body>


</html>

